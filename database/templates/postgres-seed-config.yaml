apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-seed-config
  labels:
    app: {{ .Chart.Name }}
data:
  seed.sql: |
    CREATE TABLE IF NOT EXISTS tasks (
      id SERIAL PRIMARY KEY,
      title VARCHAR(255),
      description TEXT,
      status VARCHAR(50),
      created_at TIMESTAMP DEFAULT NOW()
    );

    DELETE FROM tasks;

    INSERT INTO tasks (title, description, status)
    VALUES
      ('Learn Kubernetes', 'Play with minikube', 'pending'),
      ('Build Go API', 'TaskApp backend', 'pending'),
      ('Seed database', 'Using a Kubernetes Job', 'done'),
      ('Secret handling', 'Using sealed secrets', 'done'),
      ('Deploy frontend', 'Using Nginx', 'done');